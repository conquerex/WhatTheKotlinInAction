# 9μ¥. μ λ„¤λ¦­μ¤ 

## μ…κµ¬
- μ λ„¤λ¦­ ν•¨μμ™€ ν΄λμ¤λ¥Ό μ •μν•λ” λ°©λ²•
- νƒ€μ… μ†κ±°μ™€ μ‹¤μ²΄ν™”ν• νƒ€μ… νλΌλ―Έν„°(reified type parameter)
- μ„ μ–Έ μ§€μ κ³Ό μ‚¬μ© μ§€μ  λ³€μ„±(declaration-site variance)

<span style="color:orange">μ‹¤μ²΄ν™”λ νƒ€μ… νλΌλ―Έν„°</span>λ¥Ό μ‚¬μ©ν•λ©΄ 
μΈλΌμΈ ν•¨μ νΈμ¶μ—μ„ νƒ€μ… μΈμλ΅ μ“°μΈ κµ¬μ²΄μ μΈ νƒ€μ…μ„ μ‹¤ν–‰ μ‹μ μ— μ• μ μλ‹¤.
(μΌλ° ν΄λμ¤λ‚ ν•¨μμ κ²½μ° νƒ€μ… μΈμ μ •λ³΄κ°€ μ‹¤ν–‰ μ‹μ μ— μ‚¬λΌμ§€κΈ° λ•λ¬Έμ— μ΄λ° μΌμ΄ λ¶κ°€λ¥ν•λ‹¤.)

<span style="color:orange">μ„ μ–Έ μ§€μ  λ³€μ„±</span>μ„ μ‚¬μ©ν•λ©΄ κΈ°μ € νƒ€μ…μ€ κ°™μ§€λ§ 
νƒ€μ… μΈμκ°€ λ‹¤λ¥Έ λ‘ μ λ„¤λ¦­ νƒ€μ… Type< A >μ™€ Type< B >κ°€ μμ„ λ•
νƒ€μ… μΈμ Aμ™€ Bμ μƒμ„/ν•μ„ νƒ€μ… κ΄€κ³„μ— λ”°λΌ 
λ‘ μ λ„¤λ¦­ νƒ€μ…μ μƒμ„/ν•μ„ νƒ€μ… κ΄€κ³„κ°€ μ–΄λ–»κ² λλ”μ§€ μ§€μ •ν•  μ μλ‹¤.

- μλ¥Ό λ“¤μ–΄ List<Any>λ¥Ό μΈμλ΅ λ°›λ” ν•¨μκ°€ μλ‹¤κ³  ν–μ„ λ• 
  - List<Int>νƒ€μ…μ κ°’μ„ μ „λ‹¬ν•  μ μλ”μ§€ μ—¬λ¶€λ¥Ό μ„ μ–Έ μ§€μ  λ³€μ„±μ„ ν†µν•΄ μ§€μ •ν•  μ μλ‹¤

<span style="color:orange">μ‚¬μ© μ§€μ  λ³€μ„±</span>μ€ 
κ°™μ€ λ©ν‘(μ λ„¤λ¦­ νƒ€μ… κ°’ μ‚¬μ΄μ μƒμ„/ν•μ„ νƒ€μ… κ΄€κ³„ μ§€μ •)λ¥Ό 
μ λ„¤λ¦­ νƒ€μ… κ°’μ„ μ‚¬μ©ν•λ” μ„μΉμ—μ„ νλΌλ―Έν„° νƒ€μ…μ— λ€ν• μ μ•½μ„ ν‘μ‹ν•λ” λ°©μ‹μΌλ΅ λ‹¬μ„±ν•λ‹¤.



<br/>
<br/>


## 9.1. μ λ„¤λ¦­ νƒ€μ… νλΌλ―Έν„°

μ λ„¤λ¦­μ¤λ¥Ό μ‚¬μ©ν•λ©΄ νƒ€μ… νλΌλ―Έν„°λ¥Ό λ°›λ” νƒ€μ…μ„ μ •μν•  μ μλ‹¤. 
μ λ„¤λ¦­ νƒ€μ…μ μΈμ¤ν„΄μ¤λ¥Ό λ§λ“¤λ ¤λ©΄ νƒ€μ… νλΌλ―Έν„°λ¥Ό κµ¬μ²΄μ μΈ νƒ€μ… μΈμλ΅ μΉν™ν•΄μ•Ό ν•λ‹¤.

- List νƒ€μ…μ΄ μλ‹¤κ³  ν–μ„ λ•, λ…ν™•ν•κ² λ¬Έμμ—΄μ„ λ‹΄λ” λ¦¬μ¤νΈ = List<String>
- Map νƒ€μ…μ€ μ λ„¤λ¦­ νƒ€μ…λ³€μλ΅ Map<K, V>ν•νƒλ΅ μ„ μ–Έμ΄ λμ–΄ μκ³ , 
  μ΄λ¥Ό μΈμ¤ν„΄μ¤ν™” ν• λ• Map<String, Person>μ²λΌ κµ¬μ²΄μ μΈ νƒ€μ… μΈμλ¥Ό λ„κ²¨ μΈμ¤ν„΄μ¤ν™” ν• μ μλ‹¤.


μ½”ν‹€λ¦° μ»΄νμΌλ¬λ” λ³΄ν†µ νƒ€μ…κ³Ό λ§μ°¬κ°€μ§€λ΅ νƒ€μ… μΈμλ„ μ¶”λ΅ ν•  μ μλ‹¤.

```kotlin
val authors = listOf("Dmitry", "Svetlana")
```

listOfμ— μ „λ‹¬λ λ‘ κ°’μ΄ λ¬Έμμ—΄μ΄κΈ° λ•λ¬Έμ— μ»΄νμΌλ¬λ” μ΄ λ¦¬μ¤νΈκ°€ List<String>μ΄λΌ μ¶”λ΅ ν•λ‹¤.
λ°λ©΄, λΉ λ¦¬μ¤νΈλ¥Ό λ§λ“¤ λ•λ” νƒ€μ… μΈμλ¥Ό μ¶”λ΅ ν•  κ·Όκ±°κ°€ μ—†μ–΄ μ§μ ‘ νƒ€μ…μ„ λ…μ‹ν•΄μ•Ό ν•λ‹¤.

```kotlin
// λ‘ μ„ μ–Έμ€ λ™λ“±
val readers: MutableList<String> = mutableListOf()
val readers = mutableListOf<String>()
```

> μλ°”μ™€ λ‹¬λ¦¬ μ½”ν‹€λ¦°μ—μ„λ” μ λ„¤λ¦­ νƒ€μ…μ νƒ€μ… μΈμλ¥Ό ν”„λ΅κ·Έλλ¨Έκ°€ λ…μ‹ν•κ±°λ‚ μ»΄νμΌλ¬κ°€ μ¶”λ΅ ν•  μ μμ–΄μ•Ό ν•λ‹¤. 
> μλ°”λ” λ§¨ μ²μμ— μ λ„¤λ¦­ μ§€μ›μ΄ μ—†μ—κ³  μλ°” 1.5μ— λ’¤λ¦κ² μ λ„¤λ¦­μ„ λ„μ…ν–κΈ° λ•λ¬Έμ— 
> μ΄μ „ λ²„μ „κ³Ό νΈν™μ„±μ„ μ μ§€ν•κΈ° μ„ν•΄ νƒ€μ… μΈμκ°€ μ—†λ” μ λ„¤λ¦­ νƒ€μ…(raw νƒ€μ…)μ„ ν—μ©ν•λ‹¤.
> 
> μλ¥Ό λ“¤μ–΄ μλ°”μ—μ„λ” λ¦¬μ¤νΈ μ›μ† νƒ€μ…μ„ μ§€μ •ν•μ§€ μ•κ³  List νƒ€μ…μ λ³€μλ¥Ό μ„ μ–Έν•  μλ„ μλ‹¤. 
> μ½”ν‹€λ¦°μ€ μ²μλ¶€ν„° μ λ„¤λ¦­μ„ λ„μ…ν–κΈ° λ•λ¬Έμ— raw νƒ€μ…μ„ μ§€μ›ν•μ§€ μ•κ³  
> μ λ„¤λ¦­ νƒ€μ…μ νƒ€μ… μΈμλ¥Ό (ν”„λ΅κ·Έλλ¨Έκ°€ μ§μ ‘ μ •μν•λ“  νƒ€μ… μ¶”λ΅ μ— μν•΄ μλ™μΌλ΅ μ •μλλ“ ) ν•­μƒ μ •μν•΄μ•Ό ν•λ‹¤.

<br/>


## 9.1.1. μ λ„¤λ¦­ ν•¨μμ™€ ν”„λ΅νΌν‹°

λ¦¬μ¤νΈλ¥Ό λ‹¤λ£¨λ” ν•¨μλ¥Ό μ‘μ„±ν•λ‹¤λ©΄ μ–΄λ–¤ νΉμ • νƒ€μ…μ„ μ €μ¥ν•λ” λ¦¬μ¤νΈλΏ μ•„λ‹λΌ 
λ¨λ“  λ¦¬μ¤νΈλ¥Ό λ‹¤λ£° μ μλ” ν•¨μλ¥Ό μ›ν•  κ²ƒμ΄λ‹¤. μ΄λ΄ λ• μ λ„¤λ¦­ ν•¨μλ¥Ό μ‘μ„±ν•΄μ•Ό ν•λ‹¤.
μ λ„¤λ¦­ ν•¨μλ¥Ό νΈμ¶ν•  λ• λ°λ“μ‹ κµ¬μ²΄μ  νƒ€μ…μΌλ΅ νƒ€μ… μΈμλ¥Ό λ„κ²¨μ•Ό ν•λ‹¤. 

μ»¬λ ‰μ…μ„ λ‹¤λ£¨λ” λΌμ΄λΈλ¬λ¦¬ ν•¨μλ” λ€λ¶€λ¶„ μ λ„¤λ¦­ ν•¨μλ‹¤.

```
     π‘‡ νƒ€μ… νλΌλ―Έν„° μ„ μ–Έ
    ----
fun <T> List<T>.slice(indices: IntRange): List<T>
            ----                              ----
            π‘†νƒ€μ… νλΌλ―Έν„°κ°€ μμ‹  κ°μ²΄μ™€ λ°ν™ νƒ€μ…μ— μ“°μΈλ‹¤π‘†
```

ν•¨μμ νƒ€μ… νλΌλ―Έν„° Tκ°€ μμ‹  κ°μ²΄μ™€ λ°ν™ νƒ€μ…μ— μ“°μΈλ‹¤. 
μμ‹  κ°μ²΄μ™€ λ°ν™ νƒ€μ… λ¨λ‘ List<T>λ‹¤. 
μ΄λ° ν•¨μλ¥Ό κµ¬μ²΄μ μΈ λ¦¬μ¤νΈμ— λ€ν•΄ νΈμ¶ν•  λ• νƒ€μ… μΈμλ¥Ό λ…μ‹μ μΌλ΅ μ§€μ •ν•  μ μλ‹¤. 
ν•μ§€λ§ μ‹¤μ λ΅λ” λ€λ¶€λ¶„ μ»΄νμΌλ¬κ°€ νƒ€μ… μΈμλ¥Ό μ¶”λ΅ ν•  μ μμΌλ―€λ΅ κ·Έλ΄ ν•„μ”κ°€ μ—†λ‹¤.

```kotlin
>>> val letters = ('a'..'z').toList()
>>> println(letters.slice<Char>(0..2)) // νƒ€μ… μΈμλ¥Ό λ…μ‹μ μΌλ΅ μ§€μ •
[a, b, c]
>>> println(letters.slice(10..13)) // μ»΄νμΌλ¬λ” μ—¬κΈ°μ„ Tκ°€ CharλΌλ” μ‚¬μ‹¤μ„ μ¶”λ΅ ν•λ‹¤
[k, l, m, n]
```

λ‘ νΈμ¶μ κ²°κ³Ό νƒ€μ…μ€ λ¨λ‘ List<Char>μ΄λ‹¤.
μ»΄νμΌλ¬λ” λ°ν™ νƒ€μ… List<T>μ Tλ¥Ό μμ‹ μ΄ μ¶”λ΅ ν• Charλ΅ μΉν™ν•λ‹¤.

filter ν•¨μμ μ •μμ—μ„ (T) -> Boolean νƒ€μ…μ ν•¨μλ¥Ό νλΌλ―Έν„°λ΅ λ°›λ”λ‹¤.
μ΄ ν•¨μλ¥Ό μ• μμ μ—μ„ λ³Έ λ³€μμ— μ μ©ν•λ” λ¶€λ¶„μ„ μ‚΄ν΄λ³΄μ.

```kotlin
val authors = listOf("Dmitry", "Svetlana")
val readers = mutableListOf<String>(/* ... */)
fun <T> List<T>.filter(predicate: (T) -> Boolean): List<T>
>>> readers.filter{ it !in authors }
```

λλ‹¤ νλΌλ―Έν„°μ— λ€ν•΄ μλ™μΌλ΅ λ§λ“¤μ–΄μ§„ λ³€μ itμ νƒ€μ…μ€ TλΌλ” μ λ„¤λ¦­ νƒ€μ…μ΄λ‹¤.
μ»΄νμΌλ¬λ” filterκ°€ List<T>νƒ€μ…μ λ¦¬μ¤νΈμ— λ€ν•΄ νΈμ¶λ  μ μλ‹¤λ” μ‚¬μ‹¤κ³Ό 
filterμ μμ‹  κ°μ²΄μΈ readerμ νƒ€μ…μ΄ List<String>μ΄λΌλ” κ²ƒμ„ μ•κ³ , 
μ΄λ¥Ό ν† λ€λ΅ Tκ°€ Stringμ΄λΌκ³  μ¶”λ΅ ν•λ‹¤.

ν΄λμ¤λ‚ μΈν„°νμ΄μ¤ μ•μ— μ •μλ λ©”μ†λ“, ν™•μ¥ ν•¨μ λλ” μµμƒμ„ ν•¨μμ—μ„ νƒ€μ… νλΌλ―Έν„°λ¥Ό μ„ μ–Έν•  μ μκ³ ,
ν™•μ¥ ν•¨μμ—μ„  μμ‹  κ°μ²΄λ‚ νλΌλ―Έν„° νƒ€μ…μ— λ”°λΌ νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•  μ μλ‹¤.

μ λ„¤λ¦­ ν•¨μλ¥Ό μ •μν•  λ•μ™€ κ°™μ΄ μ λ„¤λ¦­ ν™•μ¥ ν”„λ΅νΌν‹°λ¥Ό μ„ μ–Έν•  μ μλ‹¤.

```kotlin
val <T> List<T>.penultimate: T // λ¨λ“  λ¦¬μ¤νΈ νƒ€μ…μ— μ΄ μ λ„¤λ¦­ ν™•μ¥ ν”„λ΅νΌν‹°λ¥Ό μ‚¬μ©ν•  μ μλ‹¤
    get() = this[size - 2]
>>> println(listOf(1, 2, 3, 4).penultimate) // μ΄ νΈμ¶μ—μ„ νƒ€μ… νλΌλ―Έν„° Tλ” Intλ΅ μ¶”λ΅ λλ‹¤
3
```

> ### β…ν™•μ¥ ν”„λ΅νΌν‹°λ§ μ λ„¤λ¦­ν•κ² λ§λ“¤ μ μλ‹¤. 
> μΌλ°(ν™•μ¥μ΄ μ•„λ‹) ν”„λ΅νΌν‹°λ” νƒ€μ… νλΌλ―Έν„°λ¥Ό κ°€μ§ μ μ—†λ‹¤. 
> ν΄λμ¤ ν”„λ΅νΌν‹°μ— μ—¬λ¬ νƒ€μ…μ κ°’μ„ μ €μ¥ν•  μλ” μ—†μΌλ―€λ΅ 
> μ λ„¤λ¦­ν• μΌλ° ν”„λ΅νΌν‹°λ” λ§μ΄ λμ§€ μ•λ”λ‹¤. 
> μΌλ° ν”„λ΅νΌν‹°λ¥Ό μ λ„¤λ¦­ν•κ² μ •μν•λ©΄ μ»΄νμΌλ¬κ°€ λ‹¤μκ³Ό κ°™μ€ μ¤λ¥λ¥Ό ν‘μ‹ν•λ‹¤.
> 
> ```kotlin
> val <T> x: T = TODO() 
> Error: type parameter of a property must be used in its receiver type
> ```


<br/>


## 9.1.2. μ λ„¤λ¦­ ν΄λμ¤ μ„ μ–Έ

μλ°”μ™€ λ§μ°¬κ°€μ§€λ΅ μ½”ν‹€λ¦°μ—μ„λ„ νƒ€μ… νλΌλ―Έν„°λ¥Ό λ„£μ€ κΊ½μ‡  κΈ°νΈ (< >)λ¥Ό 
ν΄λμ¤(μΈν„°νμ΄μ¤) μ΄λ¦„ λ’¤μ— λ¶™μ΄λ©΄ ν΄λμ¤(μΈν„°νμ΄μ¤)λ¥Ό μ λ„¤λ¦­ν•κ² λ§λ“¤ μ μλ‹¤. 
νƒ€μ… νλΌλ―Έν„°λ¥Ό μ΄λ¦„ λ’¤μ— λ¶™μ΄κ³  λ‚λ©΄ 
ν΄λμ¤ λ³Έλ¬Έ μ•μ—μ„ νƒ€μ… νλΌλ―Έν„°λ¥Ό λ‹¤λ¥Έ μΌλ°νƒ€μ…μ²λΌ μ‚¬μ©ν•  μ μλ‹¤.

```kotlin
interface List<T> { // List μΈν„°νμ΄μ¤μ— TλΌλ” νƒ€μ… νλΌλ―Έν„°λ¥Ό μ •μν•λ‹¤.
    operator fun get(index: Int): T // μΈν„°νμ΄μ¤ μ•μ—μ„ Tλ¥Ό μΌλ° νƒ€μ…μ²λΌ μ‚¬μ©ν•  μ μλ‹¤.
}
```

μ λ„¤λ¦­ ν΄λμ¤λ¥Ό ν™•μ¥ν•λ” ν΄λμ¤ λλ” μ λ„¤λ¦­ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ” ν΄λμ¤λ¥Ό μ •μν•λ ¤λ©΄ 
κΈ°λ° νƒ€μ…μ μ λ„¤λ¦­ νλΌλ―Έν„°μ— λ€ν•΄ νƒ€μ… μΈμλ¥Ό μ§€μ •ν•΄μ•Ό ν•λ‹¤.
μ΄λ• κµ¬μ²΄μ μΈ νƒ€μ…μ„ λ„κΈΈ μλ„ μκ³  νƒ€μ… νλΌλ―Έν„°λ΅ λ°›μ€ νƒ€μ…μ„ λ„κΈΈ μλ„ μλ‹¤.


<br/>


## 9.1.


<br/>


> ### β…


<span style="color:orange">xxxx</span>


```mermaid
graph TD
      A-->B
      A-->C
      B-->D
      C-->D
```

<br/>
<br/>
<br/>
<br/>